<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!-- <link rel="stylesheet" href="https://cdn.shoelace.style/1.0.0-beta22/shoelace.css"> -->
  <link rel="stylesheet" href="https://npmcdn.com/basscss@7.1.1/css/basscss.min.css">
  <title>GitHub Repo Deploy Robot</title>
  <meta name="description" content="">
  <meta name="author" content="Brian Zelip">
  <meta name="keywords" content="">
  <style>
    label {
      vertical-align: 0;
    }

    .align-self-end {
      align-self: flex-end;
    }
  </style>
</head>

<body class="container">

  <h1>GitHub Repo Deploy Robot</h1>
  <form action="/addRepo" method="POST" enctype="application/x-www-form-urlencoded">
    <div class="mb2">
      <div>1. Type of repository to create:</div>
      <div class="ml2">
        <input type="radio" name="repoType" id="per-repo" value="individual"> <label for="per-repo">Personal repo</label>
      </div>
      <div class="ml2">
        <input type="radio" name="repoType" id="org-repo" value="organization">
        <label for="org-repo">Organizational repo</label>
        <label for="parent-org" id="parent-org-label" class="ml1">| Organization name:</label>
        <input type="text" name="parentOrg" id="parent-org" class="ml1 flex-auto">
      </div>
    </div>
    <div class="mb2 flex">
      <label for="repo-name">2. Repository name:</label>
      <input type="text" name="repoName" id="repo-name" class="ml1 flex-auto">
    </div>
    <div class="mb2 flex">
      <label for="repo-desc">3. Repository description:</label>
      <input type="text" name="repoDesc" id="repo-desc" class="ml1 flex-auto">
    </div>
    <div class="mb2">
      <label class="block">4. Add the following GitHub username(s) to this repo:</label>
      <div class="flex">
        <div id="new-user-list">
          <input type="text" name="newUser1" id="new-user-1" class="block">
        </div>
        <button id="add-user-btn" class="ml1 btn btn-outline align-self-end regular" type="button">add another username</button>
      </div>
    </div>
    <button type="submit" class="mt4 btn btn-primary">Deploy repo!</button>
  </form>

  <script>
    // get elements of interest
    const repoType = document.forms[0].elements['repo-type'];
    const orgRepoRadio = document.getElementById('org-repo');
    const parentOrgLabel = document.getElementById('parent-org-label');
    const parentOrg = document.getElementById('parent-org');
    const repoName = document.getElementById('repo-name');
    const repoDesc = document.getElementById('repo-desc');
    const newUserList = document.getElementById('new-user-list');
    const addUserBtn = document.getElementById('add-user-btn');

    addUserBtn.addEventListener('click', e => {
      const usersCount = newUserList.children.length;
      const input = document.createElement("input");
      newUserList.appendChild(input);
      newUserList.lastChild.setAttribute("type", "text");
      newUserList.lastChild.setAttribute("name", `newUser${usersCount + 1}`);
      newUserList.lastChild.setAttribute("id", `new-user-${usersCount + 1}`);
      newUserList.lastChild.classList.add("block", "mt1");
    })
  </script>
</body>

</html>